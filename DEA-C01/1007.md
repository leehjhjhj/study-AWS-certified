## 1007 (DEA-C01 Review ~130)

### 1. AWS Glue DataBrew + IAM - PII 마스킹 및 접근 제어

**문제 시나리오**: 고객 데이터(주민등록번호, 계좌정보 등 PII 포함)를 S3에 SSE-KMS로 암호화하여 저장. PII로 태그된 데이터는 분석 전 마스킹 필요하고, 일부 사용자는 전처리 단계에서만 원본 PII 접근 필요. 최소 유지보수로 전체 파이프라인에서 PII 마스킹 및 보호 필요.

**정답: A. Use AWS Glue DataBrew to perform ETL tasks that mask the PII data + D. Use AWS IAM to manage permissions and control access to the PII data**

**이유:**

**AWS Glue DataBrew의 장점:**
- **비주얼 인터페이스**: 코드 없이 GUI로 마스킹 규칙 설정
- **PII 자동 감지**: 민감 데이터 패턴 자동 식별 (SSN, 계좌번호 등)
- **다양한 마스킹**: 부분 마스킹, 해싱, 암호화, 토큰화 지원
- **관리형 서비스**: 인프라 관리 불필요로 유지보수 최소화

**IAM 접근 제어:**
- **세분화된 권한**: 사용자/역할별로 S3 객체 및 KMS 키 접근 제어
- **단계별 권한**: 전처리 단계 사용자에게만 원본 PII 접근 허용
- **중앙 관리**: 모든 권한을 단일 IAM 정책으로 통합 관리

---

### 2. EMR S3 데이터 암호화 - Security Configuration으로 전송/저장 암호화

**문제 시나리오**: EMR 클러스터를 시작하며 S3 버킷의 데이터(KMS 키로 암호화됨)를 로드해야 함. 전송 중(in-transit)과 저장 시(at-rest) 모두 암호화 보장 필요. PEM 파일이 있는 S3 경로 보유.

**정답: C. Create an Amazon EMR security configuration. Specify the appropriate AWS KMS key for at-rest encryption for the S3 bucket. Specify the Amazon S3 path of the PEM file for in-transit encryption. Use the security configuration during EMR cluster creation.**

**이유:**

**EMR Security Configuration:**
- **저장 암호화(at-rest)**: S3의 기존 KMS 키 지정으로 저장 데이터 암호화
- **전송 암호화(in-transit)**: PEM 파일로 SSL/TLS 인증서 설정하여 노드 간 통신 암호화
- **단일 구성**: 하나의 보안 구성으로 모든 암호화 요구사항 충족
- **재사용 가능**: 동일한 보안 구성을 여러 클러스터에 적용 가능

---

### 3. Teradata에서 Redshift로 마이그레이션 - AWS SCT + DMS

**문제 시나리오**: Teradata 데이터 웨어하우스를 Amazon Redshift로 마이그레이션해야 함. 최소 운영 노력으로 요구사항 충족 필요.

**정답: B. Use the AWS Schema Conversion Tool (AWS SCT) to migrate the schema. Use AWS Database Migration Service (AWS DMS) to migrate the data.**

**이유:**

**AWS SCT (Schema Conversion Tool):**
- **스키마 자동 변환**: Teradata DDL을 Redshift DDL로 자동 변환
- **호환성 분석**: 변환 불가능한 객체나 수동 수정 필요 항목 식별
- **코드 변환**: 저장 프로시저, 함수, 뷰 등도 자동 변환
- **평가 보고서**: 마이그레이션 복잡도와 노력 수준 사전 평가

**AWS DMS (Database Migration Service):**
- **완전 관리형**: 인프라 프로비저닝 및 관리 불필요
- **최소 다운타임**: CDC(Change Data Capture)로 지속적 복제 가능
- **대용량 지원**: 테라바이트급 데이터 효율적 전송
- **자동 재시도**: 네트워크 오류 시 자동 복구

**최소 운영 노력:**
- **자동화**: 스키마 변환과 데이터 마이그레이션 모두 자동화
- **통합 솔루션**: AWS 네이티브 도구로 단일 워크플로우 구성
- **모니터링**: CloudWatch를 통한 진행 상황 추적

---

### 4. Step Functions 조건부 워크플로우 - Choice State

**문제 시나리오**: 서버리스 데이터 처리 워크플로우를 Step Functions로 설계. 외부 API에서 데이터 수집 → Lambda로 변환 → DynamoDB 로드. 수신 데이터의 내용에 따라 특정 단계를 수행해야 함.

**정답: B. Choice**

**이유:**

**Choice State:**
- **조건부 분기**: 입력 데이터 내용을 기반으로 다른 실행 경로 선택
- **다중 조건**: 여러 조건을 평가하여 각기 다른 후속 단계로 라우팅
- **동적 워크플로우**: 데이터 특성에 따라 변환 로직이나 처리 단계 변경
- **if-else 로직**: 프로그래밍의 조건문처럼 동작하여 유연한 분기 처리

**사용 사례:**
- 데이터 타입별로 다른 Lambda 함수 호출
- 데이터 크기에 따라 병렬 처리 또는 순차 처리 선택
- 특정 값의 존재 여부에 따라 추가 변환 단계 실행

---

### 5. Kinesis 핫 샤드 문제 - 랜덤 파티션 키 사용

**문제 시나리오**: Kinesis Data Streams로 사용자 행동 데이터를 매일 수집 및 처리. 핫 샤드(일부 샤드가 다른 샤드보다 훨씬 많은 데이터를 받음)로 인해 스로틀링 발생.

**정답: A. Use a random partition key to distribute the ingested records.**

**이유:**

**랜덤 파티션 키:**
- **균등 분산**: 레코드를 모든 샤드에 고르게 분산
- **핫 샤드 방지**: 특정 샤드로의 데이터 집중 현상 제거
- **즉시 적용**: 코드 변경만으로 샤드 추가 없이 문제 해결
- **비용 효율**: 샤드 수를 늘리지 않아도 스로틀링 해결

**틀린 답 - B. Increase the number of shards:**
- **근본 원인 미해결**: 샤드를 늘려도 파티션 키 분배 문제가 남아있으면 새로운 핫 샤드 발생
- **비용 증가**: 불필요한 샤드 추가로 시간당 비용 상승
- **임시 방편**: 파티션 키 전략을 개선하지 않으면 동일한 문제 재발

---